<!doctype html><html lang="en"><head>  <meta charset="utf-8" />  <meta name="viewport" content="width=device-width,initial-scale=1" />  <title>Parking Lot – Dark Gray Theme</title>  <!-- Tailwind -->  <script src="https://cdn.tailwindcss.com"></script>  <!-- Vue 3 -->  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>  <style>    /* Glass-like panels */    .glass {      background: rgba(30,41,59,0.85);      backdrop-filter: blur(8px);    }    .toast-enter-from { transform: translateY(12px); opacity: 0; }    .toast-enter-to { transform: translateY(0); opacity: 1; }    .toast-enter-active { transition: transform .22s ease, opacity .22s ease; }    .toast-leave-from { opacity: 1; transform: translateY(0); }    .toast-leave-to { opacity: 0; transform: translateY(8px); }    .toast-leave-active { transition: transform .18s ease, opacity .18s ease; }    .car-icon { width: 16px; height: 16px; display:inline-block; vertical-align:middle; margin-left:6px; }    #app { position: relative; z-index: 0; }    .modal-inner { max-height: 80vh; overflow:auto; }  </style></head><body class="bg-slate-900 text-slate-100 min-h-screen font-sans antialiased">  <div id="app" class="min-h-screen p-6 max-w-6xl mx-auto">    <header class="flex items-center justify-between mb-6">      <div class="flex items-center gap-4">        <div class="rounded-2xl p-3 glass shadow-sm">          <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor">            <path d="M3 13.5V11a7 7 0 0 1 7-7h4a7 7 0 0 1 7 7v2.5"              stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>          </svg>        </div>        <div>          <h1 class="text-2xl font-semibold leading-tight">Parking Dashboard</h1>          <p class="text-sm text-slate-400">Dark gray theme • 4×4 grid • live booking & payments</p>        </div>      </div>      <div class="flex items-center gap-3">        <div class="text-sm text-slate-300 pr-3 border-r border-slate-700">          Free: <span class="font-semibold text-lg" v-text="freeCount"></span>        </div>        <label class="flex items-center gap-2 text-sm">          <input type="checkbox" v-model="useApi" class="w-4 h-4" />          Use backend API        </label>        <button @click="toggleDark" class="px-3 py-2 rounded-lg border glass hover:scale-105 transition">          <span v-text="darkMode ? 'Light' : 'Dark'"></span> Mode        </button>      </div>    </header>    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">      <!-- Slot grid -->      <section class="lg:col-span-2 glass rounded-2xl p-6 shadow-md">        <div class="flex items-center justify-between mb-4">          <h2 class="font-medium text-lg">Slot Grid</h2>          <div class="text-sm text-slate-400">Click an occupied slot for details</div>        </div>        <div class="grid grid-cols-4 gap-4">          <template v-for="(cell, index) in flatSlots" :key="index">            <button @click="onSlotClick(cell.r, cell.c)"              :class="[                'p-4 rounded-2xl text-sm font-medium shadow-sm border flex flex-col items-start justify-between h-28 transition-all',                cell.status==='G' ? 'bg-green-900/40 border-green-600 text-green-300' :                cell.status==='Y' ? 'bg-yellow-800/40 border-yellow-500 text-yellow-200 animate-pulse' :                cell.status==='R' ? 'bg-red-900/40 border-red-600 text-red-300' :                'bg-slate-800 border-slate-700 text-slate-200'              ]">              <div class="flex items-center justify-between w-full">                <div class="text-sm">Slot <span class="font-semibold">{{cell.r}}-{{cell.c}}</span></div>                <div class="text-xs px-2 py-1 rounded-full bg-slate-700 text-slate-200">                  {{ statusLabel(cell.status) }}                </div>              </div>              <div class="mt-2 w-full">                <div class="text-xs text-slate-400 truncate">                  {{ cell.vehicle || '-' }}                  <svg v-if="cell.status==='R'" class="car-icon inline-block"                    viewBox="0 0 24 24" fill="none" stroke="currentColor">                    <path d="M3 13l1-3h16l1 3v4a2 2 0 0 1-2 2h-1"></path>                    <path d="M7 13v-2"></path><path d="M17 13v-2"></path>                  </svg>                </div>                <div class="text-2xs text-slate-500 mt-2">{{ cell.entry_time || '' }}</div>              </div>            </button>          </template>        </div>        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">          <!-- Request Slot -->          <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">            <h3 class="font-medium mb-2">Request Slot</h3>            <form @submit.prevent="requestSlot" class="space-y-2">              <input v-model="form.vehicle_no" placeholder="Vehicle No (e.g. TN3823)"                class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-900 text-slate-100 placeholder-slate-500"                required />              <div class="grid grid-cols-2 gap-2">                <input v-model="form.user_id" placeholder="User ID"                  class="px-3 py-2 rounded-md border border-slate-600 bg-slate-900 text-slate-100 placeholder-slate-500"                  required />                <input v-model="form.user_name" placeholder="User name"                  class="px-3 py-2 rounded-md border border-slate-600 bg-slate-900 text-slate-100 placeholder-slate-500"                  required />              </div>              <div class="flex gap-2">                <button class="flex-1 py-2 rounded-xl bg-blue-600 text-white font-semibold shadow hover:bg-blue-700 transition">                  Request                </button>                <button type="button" @click="autoFillSample" class="py-2 px-3 rounded-xl border border-slate-600">                  Sample                </button>              </div>            </form>          </div>          <!-- Leave Slot -->          <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">            <h3 class="font-medium mb-2">Free / Leave Slot</h3>            <form @submit.prevent="leaveSlot" class="space-y-2">              <input v-model="leave.slot" placeholder="Slot (row,col e.g. 0,1)"                class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-900 text-slate-100 placeholder-slate-500" />              <input v-model="leave.vehicle_no" placeholder="Vehicle No (optional)"                class="w-full px-3 py-2 rounded-md border border-slate-600 bg-slate-900 text-slate-100 placeholder-slate-500" />              <div class="flex gap-2">                <button class="flex-1 py-2 rounded-xl bg-rose-600 text-white font-semibold shadow hover:bg-rose-700 transition">                  Leave                </button>                <button type="button" class="py-2 px-3 rounded-xl border border-slate-600" @click="leaveReset">                  Reset                </button>              </div>              <div class="text-xs text-slate-400">Leave by coordinates or vehicle no. Confirm payment will finalize freeing.</div>            </form>          </div>        </div>      </section>      <!-- Tables -->      <aside class="glass rounded-2xl p-6 shadow-md overflow-auto">        <div class="flex items-center justify-between mb-4">          <h2 class="text-lg font-medium">Tables</h2>          <div class="flex gap-2">            <button @click="refreshAll" class="px-3 py-1 rounded border border-slate-600">Refresh</button>            <button @click="resetLocal" class="px-3 py-1 rounded bg-yellow-100 text-yellow-900">Reset Local</button>          </div>        </div>        <!-- Slot Table -->        <div class="mb-4">          <div class="flex justify-between items-center mb-1">            <h3 class="text-sm font-medium">Slot Table</h3>            <button @click="clearSlotTable" class="text-xs px-2 py-1 border border-slate-600 rounded">Clear</button>          </div>          <div class="overflow-auto max-h-40 mt-2">            <table class="w-full text-sm min-w-[420px] text-slate-300">              <thead class="text-xs text-slate-400 sticky top-0 bg-slate-800">                <tr><th class="pr-2 text-left">Slot_ID</th><th class="pr-2 text-left">Vehicle_No</th><th class="pr-2 text-left">Entry_Time</th><th class="pr-2 text-left">Status</th></tr>              </thead>              <tbody>                <tr v-for="entry in slotTable" :key="entry.slot"                    class="border-t border-slate-700 hover:bg-slate-800 transition">                  <td class="py-1">{{entry.slot}}</td>                  <td class="py-1">{{entry.vehicle_no || '-'}}</td>                  <td class="py-1">{{entry.entry_time || '-'}}</td>                  <td class="py-1">{{ statusText(entry.status) }}</td>                </tr>              </tbody>            </table>          </div>        </div>        <!-- Vehicle Table -->        <div class="mb-4">          <div class="flex justify-between items-center mb-1">            <h3 class="text-sm font-medium">Vehicle Table</h3>            <button @click="clearVehicleTable" class="text-xs px-2 py-1 border border-slate-600 rounded">Clear</button>          </div>          <div class="overflow-auto max-h-40 mt-2">            <table class="w-full text-sm min-w-[420px] text-slate-300">              <thead class="text-xs text-slate-400 sticky top-0 bg-slate-800">                <tr><th class="pr-2 text-left">Vehicle_No</th><th class="pr-2 text-left">User_ID</th><th class="pr-2 text-left">User_Name</th><th class="pr-2 text-left">Register_Status</th></tr>              </thead>              <tbody>                <tr v-for="v in vehicleTable" :key="v.vehicle_no"                    class="border-t border-slate-700 hover:bg-slate-800 transition">                  <td class="py-1">{{v.vehicle_no}}</td>                  <td class="py-1">{{v.user_id}}</td>                  <td class="py-1">{{v.user_name}}</td>                  <td class="py-1">{{ registerStatusText(v.register_status) }}</td>                </tr>              </tbody>            </table>          </div>        </div>        <!-- Payment Table -->        <div>          <div class="flex justify-between items-center mb-1">            <h3 class="text-sm font-medium">Payment History</h3>            <button @click="clearPaymentTable" class="text-xs px-2 py-1 border border-slate-600 rounded">Clear</button>          </div>          <div class="overflow-auto max-h-40 mt-2">            <table class="w-full text-sm min-w-[420px] text-slate-300">              <thead class="text-xs text-slate-400 sticky top-0 bg-slate-800">                <tr><th class="pr-2 text-left">Vehicle No</th><th class="pr-2 text-left">Slot ID</th><th class="pr-2 text-left">Exit Time</th><th class="pr-2 text-left">Bill</th></tr>              </thead>              <tbody>                <tr v-for="(p, index) in paymentTable" :key="index"                    class="border-t border-slate-700 hover:bg-slate-800 transition">                  <td class="py-1">{{ p.vehicle_no }}</td>                  <td class="py-1">{{ p.slot_id }}</td>                  <td class="py-1">{{ p.exit_time }}</td>                  <td class="py-1 text-green-400 font-semibold">?{{ p.bill }}</td>                </tr>              </tbody>            </table>          </div>        </div>      </aside>    </main>    <!-- Payment Modal -->    <div v-if="showPayment" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">      <div class="bg-slate-800 text-slate-100 rounded-xl max-w-md w-full p-6 shadow-xl modal-inner">        <h3 class="text-lg font-semibold mb-3">Confirm Payment</h3>        <p class="text-sm"><b>Vehicle:</b> {{ paymentData.vehicle }}</p>        <p class="text-sm"><b>Entry Time:</b> {{ paymentData.entry_time }}</p>        <p class="text-sm"><b>Minutes Parked:</b> {{ paymentData.minutes }}</p>        <p class="text-sm mb-4"><b>Amount Due:</b> <span class="text-green-400 font-semibold">?{{ paymentData.amount }}</span></p>        <div class="flex justify-end gap-3">          <button @click="cancelPayment" class="py-2 px-3 rounded border border-slate-600">Cancel</button>          <button @click="confirmPayment" class="py-2 px-3 rounded bg-green-600 text-white">Confirm & Free Slot</button>        </div>      </div>    </div>    <!-- Toasts -->    <div class="fixed right-6 bottom-6 z-60 flex flex-col gap-3 items-end pointer-events-none">      <transition-group name="toast" tag="div">        <div v-for="t in toasts" :key="t.id"          class="max-w-sm px-4 py-3 rounded-lg shadow-lg glass border border-slate-700 flex items-start gap-3 pointer-events-auto">          <div class="text-xl" v-html="t.icon"></div>          <div>            <div class="font-semibold">{{ t.title }}</div>            <div class="text-xs text-slate-400">{{ t.message }}</div>          </div>          <button @click="removeToast(t.id)" class="ml-3 text-slate-400 hover:text-slate-200">?</button>        </div>      </transition-group>    </div>  </div>  <script>    const { createApp, reactive, ref, computed } = Vue;    createApp({      setup() {        const RATE_PER_MINUTE = 1;        const useApi = ref(false);        const darkMode = ref(true);        const rows = 4, cols = 4;        const slots = reactive([]);        for (let r = 0; r < rows; r++) {          slots[r] = [];          for (let c = 0; c < cols; c++) {            slots[r][c] = { status: 'G', vehicle: null, entry_time: null, entry_ts: null };          }        }        const form = reactive({ vehicle_no: '', user_id: '', user_name: '' });        const leave = reactive({ slot: '', vehicle_no: '' });        const slotTable = ref([]), vehicleTable = ref([]), paymentTable = ref([]);        const showPayment = ref(false);        const paymentData = reactive({ r: null, c: null, vehicle: '', entry_time: '', minutes: 0, amount: 0 });        const vehicleRegistry = reactive({});        const toasts = reactive([]); let toastSeq = 1;        function pushToast({ title='Info', message='', duration=3000, icon='' }={}) {          const id = toastSeq++; toasts.push({ id, title, message, icon });          if(duration>0)setTimeout(()=>removeToast(id),duration);        }        function removeToast(id){const i=toasts.findIndex(t=>t.id===id);if(i>=0)toasts.splice(i,1);}        const flatSlots = computed(()=>{const arr=[];for(let r=0;r<rows;r++)for(let c=0;c<cols;c++)arr.push({...slots[r][c],r,c});return arr;});        const freeCount = computed(()=>flatSlots.value.filter(s=>s.status==='G').length);        const formatDate=d=>d?new Date(d).toLocaleString():'-';        const statusText=s=>s==='G'?'Free':s==='Y'?'Waiting':s==='R'?'Occupied':'Unknown';        const registerStatusText=s=>s==='R'?'Registered':s==='Y'?'Waiting':s==='F'?'Free':'Unknown';        function rebuildSlotTable(){slotTable.value=flatSlots.value.map(s=>({slot:`${s.r},${s.c}`,vehicle_no:s.vehicle,entry_time:s.entry_time,status:s.status}));}        function rebuildVehicleTable(){vehicleTable.value=Object.keys(vehicleRegistry).map(v=>({vehicle_no:v,...vehicleRegistry[v]}));}        function rebuildTables(){rebuildSlotTable();rebuildVehicleTable();}        function requestSlot(){          const v=form.vehicle_no.trim().toUpperCase();if(!v)return pushToast({title:'Error',message:'Vehicle required',icon:'??'});          if(vehicleRegistry[v]&&['R','Y'].includes(vehicleRegistry[v].status))            return pushToast({title:'Already exists',message:'Vehicle already parked',icon:'??'});          let found=null;for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){if(slots[r][c].status==='G'){found={r,c};break;}}if(found)break;}          if(found){slots[found.r][found.c].status='Y';slots[found.r][found.c].vehicle=v;            vehicleRegistry[v]={user_id:form.user_id.trim(),user_name:form.user_name.trim(),status:'Y'};rebuildTables();            pushToast({title:'Slot reserved',message:`Vehicle ${v} waiting (3s)`,icon:'?'});            setTimeout(()=>{const now=new Date();slots[found.r][found.c].status='R';slots[found.r][found.c].entry_time=formatDate(now);              slots[found.r][found.c].entry_ts=now.getTime();vehicleRegistry[v].status='R';rebuildTables();              pushToast({title:'Parked',message:`Vehicle ${v} parked at ${found.r},${found.c}`,icon:'?'});},3000);}          else{vehicleRegistry[v]={user_id:form.user_id,user_name:form.user_name,status:'Y'};rebuildTables();            pushToast({title:'Full',message:'No free slots',icon:'??'});}          form.vehicle_no='';form.user_id='';form.user_name='';        }        function onSlotClick(r,c){const s=slots[r][c];          if(s.status==='G')return pushToast({title:'Free',message:`${r},${c} free`,icon:'??'});          if(s.status==='Y')return pushToast({title:'Waiting',message:`${r},${c} waiting`,icon:'?'});          pushToast({title:`Slot ${r},${c}`,message:`Vehicle ${s.vehicle} parked ${s.entry_time}`,icon:'??',duration:5000});        }        function leaveSlot(){          let r=null,c=null;if(leave.slot){const p=leave.slot.split(',');if(p.length!==2)return;            r=+p[0];c=+p[1];if(slots[r][c].status!=='R')return;}          else if(leave.vehicle_no){const v=leave.vehicle_no.trim().toUpperCase();            for(let rr=0;rr<rows;rr++)for(let cc=0;cc<cols;cc++)if(slots[rr][cc].vehicle===v&&slots[rr][cc].status==='R'){r=rr;c=cc;}}          if(r===null||c===null)return pushToast({title:'Not found',message:'Vehicle not found',icon:'??'});          const s=slots[r][c];const mins=Math.ceil((Date.now()-s.entry_ts)/60000);const amt=mins*1;          Object.assign(paymentData,{r,c,vehicle:s.vehicle,entry_time:s.entry_time,minutes:mins,amount:amt});          showPayment.value=true;        }        function confirmPayment(){          const {r,c,vehicle,amount}=paymentData;slots[r][c]={status:'G',vehicle:null,entry_time:null,entry_ts:null};          if(vehicleRegistry[vehicle])vehicleRegistry[vehicle].status='F';          paymentTable.value.push({vehicle_no:vehicle,slot_id:`${r}-${c}`,exit_time:formatDate(new Date()),bill:amount});          rebuildTables();showPayment.value=false;leave.slot='';leave.vehicle_no='';          pushToast({title:'Payment done',message:`?${amount} paid for ${vehicle}`,icon:'??'});}        function cancelPayment(){showPayment.value=false;}        function autoFillSample(){form.vehicle_no='TN3823';form.user_id='user1';form.user_name='John Doe';}        function clearSlotTable(){for(let r=0;r<rows;r++)for(let c=0;c<cols;c++)slots[r][c]={status:'G',vehicle:null,entry_time:null,entry_ts:null};rebuildTables();}        function clearVehicleTable(){for(const v in vehicleRegistry)delete vehicleRegistry[v];rebuildTables();}        function clearPaymentTable(){paymentTable.value=[];}        function refreshAll(){rebuildTables();}        function resetLocal(){clearSlotTable();clearVehicleTable();clearPaymentTable();}        function leaveReset(){leave.slot='';leave.vehicle_no='';}        function statusLabel(s){return s==='G'?'Free':s==='Y'?'Waiting':s==='R'?'Occupied':'Unknown';}        function toggleDark(){darkMode.value=!darkMode.value;}        rebuildTables();        return{useApi,darkMode,toggleDark,form,leave,flatSlots,freeCount,slotTable,vehicleTable,paymentTable,          requestSlot,onSlotClick,leaveSlot,confirmPayment,cancelPayment,autoFillSample,          clearSlotTable,clearVehicleTable,clearPaymentTable,refreshAll,resetLocal,leaveReset,          showPayment,paymentData,statusText,registerStatusText,statusLabel,toasts,pushToast,removeToast};      }    }).mount('#app');  </script></body></html>